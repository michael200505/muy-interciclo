<app-header></app-header>

<div class="layout">
  <admin-sidebar></admin-sidebar>

  <page-container>
    <h1 class="page-title">Panel de administrador</h1>

    <section>
      <h2>Usuarios registrados</h2>

      <div class="list">
        <div class="user-card" *ngFor="let user of users">
          <div class="user-main">
            <div class="user-info">
              <div class="user-name">{{ user.displayName }}</div>
              <div class="user-email">{{ user.email }}</div>
            </div>
            <div class="user-role">Rol: <b>{{ user.role }}</b></div>
          </div>

          <div class="user-actions">
            <button (click)="selectUser(user)">Convertir a programador</button>
            <button class="secondary" (click)="makeAdmin(user)">Asignar administrador</button>
          </div>
        </div>
      </div>
    </section>

    <section *ngIf="selectedUser" class="form-section">
      <h2>Crear perfil de programador</h2>
      <p>Usuario seleccionado: <b>{{ selectedUser.displayName }}</b></p>

      <form (ngSubmit)="makeProgrammer()">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="newProgrammer.name" name="name">

        <label>Especialidad</label>
        <input type="text" [(ngModel)]="newProgrammer.specialty" name="specialty">

        <label>Descripci√≥n</label>
        <textarea [(ngModel)]="newProgrammer.description" name="description"></textarea>

        <button type="submit">Guardar programador</button>
      </form>
    </section>

    <section>
      <h2>Programadores registrados</h2>

      <div class="list">
        <div class="prog-card" *ngFor="let prog of programmers">
          <img [src]="prog.photoURL" alt="Foto de {{ prog.name }}" class="avatar">
          <div>
            <div class="user-name">{{ prog.name }}</div>
            <div class="user-email">{{ prog.specialty }}</div>
          </div>
        </div>
      </div>
    </section>
  </page-container>
</div>
