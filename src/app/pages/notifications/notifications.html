<app-header></app-header>

<page-container>
  <div class="topbar">
    <h1>Notificaciones</h1>
    <button class="btn" (click)="markAllRead()" [disabled]="loading || items.length === 0">
      Marcar todas como leídas
    </button>
  </div>

  <div *ngIf="loading" class="hint">Cargando...</div>

  <div *ngIf="!loading && items.length === 0" class="hint">
    No tienes notificaciones aún.
  </div>

  <div class="list" *ngIf="!loading && items.length > 0">
    <div class="card" *ngFor="let n of items; trackBy: trackById" [class.unread]="!n.read">
      <div class="row">
        <div class="title">
          <span class="dot" *ngIf="!n.read"></span>
          <b>{{ n.title }}</b>
        </div>

        <button class="small" (click)="markRead(n)" [disabled]="n.read">Marcar leída</button>
      </div>

      <p class="msg">{{ n.message }}</p>
      <p class="meta">
        {{ n.createdAt | date:'medium' }}
      </p>
    </div>
  </div>
</page-container>
